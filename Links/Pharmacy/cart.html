<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <title>Cart - Pharmacy App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
      }
      main {
        padding-bottom: 140px; /* space for fixed footer */
      }
    </style>
  </head>
  <body class="bg-[#E6F4F1] min-h-screen flex flex-col">
    <header
      class="bg-[#1E4D4D] px-5 py-4 rounded-b-3xl flex items-center justify-between"
    >
      <h1 class="text-white text-xl font-extrabold">My Cart</h1>
      <a
        href="dashboard.html"
        aria-label="Back to home"
        class="text-white text-lg"
      >
        <i class="fas fa-arrow-left"></i>
      </a>
    </header>

    <main
      class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 w-full overflow-auto"
    >
      <div class="flex flex-wrap items-center justify-between mb-4 gap-4">
        <div class="flex items-center gap-2">
          <input
            id="selectAll"
            type="checkbox"
            class="w-5 h-5 text-[#2B7A78] border-gray-300 rounded focus:ring-[#3AAFA9]"
          />
          <label
            for="selectAll"
            class="text-[#1E4D4D] font-semibold cursor-pointer select-none"
          >
            Select All
          </label>
        </div>
        <button
          id="deleteSelected"
          class="hidden bg-[#D14343] text-white px-4 py-1 rounded-md font-semibold hover:bg-[#A11B1B] transition whitespace-nowrap"
          type="button"
        >
          Delete Selected
        </button>
      </div>

      <ul id="cartList" class="space-y-6">
        <!-- Cart Item 1 -->
        <li
          class="bg-white rounded-2xl shadow p-4 flex flex-col sm:flex-row gap-4 items-center sm:items-start"
        >
          <input
            type="checkbox"
            class="item-checkbox w-5 h-5 text-[#2B7A78] border-gray-300 rounded focus:ring-[#3AAFA9] self-start sm:self-auto"
          />
          <img
            src="https://storage.googleapis.com/a1aa/image/5e8585c3-62db-4eec-d7f1-d9141698901c.jpg"
            alt="Black bottle labeled Multivitamin for Men"
            class="w-32 h-32 sm:w-24 sm:h-24 object-contain rounded-lg"
            draggable="false"
          />
          <div class="flex flex-col flex-grow w-full sm:w-auto">
            <h2 class="text-[#1E4D4D] font-semibold text-lg mb-1">
              Multivitamin
            </h2>
            <p class="text-sm text-gray-600 mb-2">
              Price: <span class="text-[#D14343] font-semibold">$2.50</span>
            </p>
            <div class="flex items-center gap-2 max-w-[140px]">
              <button
                type="button"
                class="quantity-btn bg-[#2B7A78] text-white rounded px-3 py-1 font-semibold"
                data-action="decrease"
              >
                -
              </button>
              <input
                type="number"
                min="1"
                value="1"
                class="quantity-input w-12 text-center border border-gray-300 rounded"
              />
              <button
                type="button"
                class="quantity-btn bg-[#2B7A78] text-white rounded px-3 py-1 font-semibold"
                data-action="increase"
              >
                +
              </button>
            </div>
          </div>
          <button
            aria-label="Remove Multivitamin from cart"
            class="text-[#D14343] hover:text-[#A11B1B] text-2xl self-start sm:self-auto"
            type="button"
          >
            <i class="fas fa-trash-alt"></i>
          </button>
        </li>

        <!-- Cart Item 2 -->
        <li
          class="bg-white rounded-2xl shadow p-4 flex flex-col sm:flex-row gap-4 items-center sm:items-start"
        >
          <input
            type="checkbox"
            class="item-checkbox w-5 h-5 text-[#2B7A78] border-gray-300 rounded focus:ring-[#3AAFA9] self-start sm:self-auto"
          />
          <img
            src="https://storage.googleapis.com/a1aa/image/0a62ca43-2b10-4144-fb8e-520baf77111e.jpg"
            alt="Transparent bottle labeled Vitamin D plus with colorful label"
            class="w-32 h-32 sm:w-24 sm:h-24 object-contain rounded-lg"
            draggable="false"
          />
          <div class="flex flex-col flex-grow w-full sm:w-auto">
            <h2 class="text-[#1E4D4D] font-semibold text-lg mb-1">
              Vitamin D plus.
            </h2>
            <p class="text-sm text-gray-600 mb-2">
              Price: <span class="text-[#D14343] font-semibold">$1.50</span>
            </p>
            <div class="flex items-center gap-2 max-w-[140px]">
              <button
                type="button"
                class="quantity-btn bg-[#2B7A78] text-white rounded px-3 py-1 font-semibold"
                data-action="decrease"
              >
                -
              </button>
              <input
                type="number"
                min="1"
                value="2"
                class="quantity-input w-12 text-center border border-gray-300 rounded"
              />
              <button
                type="button"
                class="quantity-btn bg-[#2B7A78] text-white rounded px-3 py-1 font-semibold"
                data-action="increase"
              >
                +
              </button>
            </div>
          </div>
          <button
            aria-label="Remove Vitamin D plus from cart"
            class="text-[#D14343] hover:text-[#A11B1B] text-2xl self-start sm:self-auto"
            type="button"
          >
            <i class="fas fa-trash-alt"></i>
          </button>
        </li>
      </ul>
    </main>

    <footer
      class="bg-white border-t border-gray-300 p-5 max-w-7xl mx-auto w-full rounded-t-3xl fixed bottom-0 left-0 right-0 flex flex-col gap-3"
    >
      <!-- Total and Checkout Row -->
      <div class="flex justify-between items-center gap-3 flex-wrap">
        <div class="text-[#1E4D4D] font-semibold text-lg whitespace-nowrap">
          Total: <span id="totalPrice" class="text-[#D14343]">$5.50</span>
        </div>
        <button
          type="button"
          class="bg-[#2B7A78] text-white rounded-full px-8 py-3 font-semibold hover:bg-[#3AAFA9] transition whitespace-nowrap"
        >
          Checkout
        </button>
      </div>

      <hr class="border-gray-300" />

      <!-- Voucher and Items Selected Row -->
      <div
        class="flex justify-between items-center text-sm text-[#1E4D4D] font-semibold gap-3 flex-wrap"
      >
        <div>
          Platform Voucher:
          <button class="text-[#2B7A78] underline hover:text-[#3AAFA9]">
            Select or Enter a Code
          </button>
        </div>
        <div>
          No Items Selected:
          <span id="selectedTotal" class="text-[#D14343]">$0.00</span>
        </div>
      </div>
    </footer>

    <script>
      const selectAllCheckbox = document.getElementById("selectAll");
      const deleteSelectedBtn = document.getElementById("deleteSelected");
      const itemCheckboxes = document.querySelectorAll(".item-checkbox");
      const totalPriceEl = document.getElementById("totalPrice");
      const selectedTotalEl = document.getElementById("selectedTotal");
      const cartList = document.getElementById("cartList");

      function updateTotals() {
        let selectedTotal = 0;
        const cartItems = cartList.querySelectorAll("li");

        cartItems.forEach((item) => {
          const checkbox = item.querySelector(".item-checkbox");
          if (checkbox && checkbox.checked) {
            const priceText = item
              .querySelector("p span")
              .textContent.replace("$", "");
            const price = parseFloat(priceText);
            const qtyInput = item.querySelector(".quantity-input");
            const qty = qtyInput ? parseInt(qtyInput.value) : 1;
            selectedTotal += price * qty;
          }
        });

        const formatted = `$${
          selectedTotal > 0 ? selectedTotal.toFixed(2) : "0.00"
        }`;
        totalPriceEl.textContent = formatted;
        selectedTotalEl.textContent = formatted;
      }

      // Quantity buttons functionality
      document.querySelectorAll(".quantity-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          const input = btn.parentElement.querySelector(".quantity-input");
          let currentValue = parseInt(input.value);
          if (btn.dataset.action === "increase") {
            input.value = currentValue + 1;
          } else if (btn.dataset.action === "decrease" && currentValue > 1) {
            input.value = currentValue - 1;
          }
          updateTotals();
        });
      });

      // Quantity input manual change
      document.querySelectorAll(".quantity-input").forEach((input) => {
        input.addEventListener("input", () => {
          if (input.value === "" || parseInt(input.value) < 1) {
            input.value = 1;
          }
          updateTotals();
        });
      });

      // Select all checkbox functionality
      selectAllCheckbox.addEventListener("change", () => {
        itemCheckboxes.forEach((cb) => {
          cb.checked = selectAllCheckbox.checked;
        });
        toggleDeleteButton();
        updateTotals();
      });

      // Individual checkbox change
      itemCheckboxes.forEach((cb) => {
        cb.addEventListener("change", () => {
          if (!cb.checked) {
            selectAllCheckbox.checked = false;
          } else if (
            Array.from(itemCheckboxes).every((checkbox) => checkbox.checked)
          ) {
            selectAllCheckbox.checked = true;
          }
          toggleDeleteButton();
          updateTotals();
        });
      });

      // Show/hide delete button based on selection
      function toggleDeleteButton() {
        const anyChecked = Array.from(itemCheckboxes).some((cb) => cb.checked);
        if (anyChecked) {
          deleteSelectedBtn.classList.remove("hidden");
        } else {
          deleteSelectedBtn.classList.add("hidden");
        }
      }

      // Delete selected items
      deleteSelectedBtn.addEventListener("click", () => {
        itemCheckboxes.forEach((cb) => {
          if (cb.checked) {
            cb.closest("li").remove();
          }
        });
        updateTotals();
        toggleDeleteButton();
        selectAllCheckbox.checked = false;
      });

      // Initialize totals on page load
      updateTotals();
    </script>
  </body>
</html>
